# LPython_Spider

## 概述

> LPython项目目前设置了3个模块，分别是基于Python的 `文章`  ,`视频`  `招聘信息`数据来自知名博客，招聘信息信息站，在结构上使用scrapy,redis, mongodb,graphite实现的一个分布式网络爬虫,
底层存储mongodb集群,分布式使用redis实现,爬虫状态显示使用graphite实现。


### 文章模块
> 对于文章模块，目前将针对 '伯乐在线'，'简书'，'头条'，'CSDN',的中的有关Python的信息进行抓取，会采用分布式爬虫，定向爬虫进行抓取，在存储上，采用MongDB分布式存储，另外由于LPython项目还存在移动端的部分，小程序中要求使用Https传输协议，为了节省成本，在存储数据时，还会用使用 LeanCloud后端云进行数据的备份存储，方便移动端的调用。


* 数据来源
  * 伯乐在线
  * 简书
  * 头条

* 数据获取
  * 分布式爬虫
  * 定向爬虫
  * 分析网络请求所获取的RestFulAPI
  
* 数据存储
  * MongoDB 分布式存储
  * LeanCloud 后端云存储
  
### 伯乐在线

> 伯乐在线 的URL设计对于 爬虫来说十分友好，也不存在需要Spider动态技术抓取的页面，方便爬取，在爬取上，将采用分布式的结构直接进行爬取。

* 目标链接 ：http://python.jobbole.com/all-posts/
* 抓取方式 ：分布式
* 抓取内容 
   * 标题
   * 发布时间
   * 简介
   * 分类
   * 文章URL
   * 封面URL
   
### 关于存错
> 在存储上我们采用了俩种存储方式，一种是分布式存储，另一种是后端云存储，之所以会有俩种存储方式是因为，小程序和Android端需要有RESTfulApi，
而且小程序还需要验证证书，而且我们目前还没有真正服务器的资源，所以现阶段只能使用后端云的方式来存储数据，之后准备用Django或者Flask来搭一个
WEB服务，来解决这些问题

> 之后我们在进行分布式时，会先将数据同步至redis的中，方便以后的集中处理，提供给MongoDB和 ES使用，来构建搜索引擎

###  关于分布式的问题

> 分布式使用的是 Redis,和Scrapy-redis的实现的，Redis用来缓存各个爬虫生成的Request，和存储过滤请求的指纹信息，以及缓存item数据。但是是实际的过程中
遇到了这样的一个问题

#### 问题描述
> 有俩台机器，Windows电脑A，和Ubuntu电脑B，redis server部署在 Windows电脑A上，在电脑A,B启动爬虫后，俩只爬虫都进入监听状态，在redis中进行 url的lpush操作，
奇怪的事情发生了，电脑A，或者电脑B中只有一台电脑能监听到 redis,但是具体哪个能够监听到这个很随机，有时是电脑A，有时是电脑B,也就是说只有一个爬虫能够正常请求
被这个问题困扰了3天，最后，又完完全全的刨析了一次，源码才解决这个，关于这个问题的详细描述和运行状态截图，以及排重思路，解决办法可以查看这里
[scrapy-redis多台机器部署，但只有一台可执行的问题](https://segmentfault.com/q/1010000012925625)




  
 
